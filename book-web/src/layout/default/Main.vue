<template>
  <el-container class="layout_box">
    <!--头部 -->
    <el-header height="80px"
      ><global-header title="学生管理系统-304"></global-header
    ></el-header>
    <el-container class="contexnt-box">
      <!--侧边栏 -->
      <el-aside width="230px">
        <global-side-bar :menu="getAccessRouter"
      /></el-aside>
      <!-- 主体-->
      <el-main
        ><header-crumbs tags=""></header-crumbs>
        <div class="layout-view">
          <!-- 缓存组件 -->
          <keep-alive :include="getTagList.map((i) => i.name)">
            <Transition name="el-zoom-in-bottom" appear mode="out-in"
              ><router-view></router-view></Transition
          ></keep-alive></div
      ></el-main>
      <!-- <el-footer height="100px">Footer</el-footer> -->
    </el-container>
  </el-container>
</template>

<script>
import GlobalSideBar from './global/sidebar/GlobalSideBar.vue'
import GlobalHeader from './global/header/GlobalHeader.vue'
import HeaderCrumbs from './global/header/HeaderCrumbs.vue'
import { mapGetters } from 'vuex'
export default {
  components: { GlobalSideBar, GlobalHeader, HeaderCrumbs },
  data() {
    return {
      isCollapse: false
    }
  },
  computed: {
    ...mapGetters(['getAccessRouter', 'getTagList', 'getActiveMenu'])
  },
  methods: {},
  watch: {
    getActiveMenu(newPath, oldPath) {
      // 说明是第一次加载
      if (!oldPath) return
      this.$router.push({ path: newPath.path })
    }
  }
}
</script>

<style scoped>
.layout_box {
  min-width: 100vw;
  min-height: 100vh;
  overflow: hidden;
}
.el-main {
  color: #333;
  text-align: center;
}
.el-main .layout-view {
  background: white;

  height: calc(100% - 40px);
}
.el-header {
  background: url('~assets/8dbc96051e7bc028511bb1a5c48bf7d8.png') no-repeat
    center;
  background-size: cover;
}

.contexnt-box {
  padding: 0 10px 10px;
}
</style>